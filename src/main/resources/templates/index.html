<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">   
<head>  
    <meta charset="UTF-8"/>  
    <title>home page</title>  
    <link rel="stylesheet" type="text/css" href="../static/easyui/themes/default/easyui.css" th:href="@{easyui/themes/default/easyui.css}"/>  
    <link rel="stylesheet" type="text/css" href="../static/easyui/themes/icon.css" th:href="@{easyui/themes/icon.css}"/>  
    <link rel="stylesheet" type="text/css" href="../static/easyui/themes/color.css" th:href="@{easyui/themes/color.css}"/>  
    <script type="text/javascript" src="../static/jquery/jquery.min.js" th:src="@{jquery/jquery.min.js}"></script>  
    <script type="text/javascript" src="../static/easyui/jquery.easyui.min.js" th:src="@{easyui/jquery.easyui.min.js}"></script>  
<style>
  article, aside, figure, footer, header, hgroup, 
  menu, nav, section { display: block; }
  .west{
    width:200px;
    padding:10px;
  }
  .north{
    height:100px;
  }
</style>
</head>  
<body class="easyui-layout">
  <div region="north" class="north" title="TEST">
    <h1>JBR</h1>
  </div>
    <div id="tabs" region="center"  class="easyui-tabs" fit="true" border="false">
      <div title="首页"></div>
    </div>
  <div region="west" class="west" title="menu">
    <ul class="easyui-tree" id="tt">
    </ul>
  </div>
  
  <div id="tabsMenu" class="easyui-menu" style="width:120px;">  
    <div name="close">关闭</div>  
    <div name="Other">关闭其他</div>  
    <div name="All">关闭所有</div>
  </div>

<script type="text/javascript">

$(function () {  
	 //动态菜单数据
    var treeData = [{
            text : "菜单",
            children : [{
                    text : "获取设备",
                    attributes : {
                        url : "/getDeviceIndex"
                    }
                }, {
                    text : "规划计算",
                    attributes : {
                        url : "/planIndex"
                    }
                }
            ]
        }
    ];
	 
    //处理树型菜单点击事件  
    $('#tt').tree({  
    	 data : treeData,
         onClick: function (node) {  
            addtab(node.text, node.attributes.url);  
        }  
    });  

    var addtab = function (title, url) {  

        if ($('#tabs').tabs('exists', title)) {  
            $('#tabs').tabs('select', title);  
        } else {  
            $('#tabs').tabs('add', {  
                title: title,  
                closable: true,  
                content: createFrame(url), 
                //href: url,  
            });  
        }  
    }  

    function createFrame(url) {  
        var s = '<iframe scrolling="auto" frameborder="0" src="'+url+'" style="width:100%;height:99%;"></iframe>';  
        return s;  
    }  
    
  //绑定tabs的右键菜单
    $("#tabs").tabs({
        onContextMenu : function (e, title) {
            e.preventDefault();
            $('#tabsMenu').menu('show', {
                left : e.pageX,
                top : e.pageY
            }).data("tabTitle", title);
        }
    });
    
    //实例化menu的onClick事件
    $("#tabsMenu").menu({
        onClick : function (item) {
            CloseTab(this, item.name);
        }
    });
    

}); 
</script>
 </body>
</html> 
